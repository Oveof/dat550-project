<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blockchain Network</title>
    <link rel="stylesheet" href="https://unpkg.com/pico.css"/>
</head>
<body>

<header>
    <h1>Reccomendation thingy</h1>
</header>

<main>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
        }


      </style>

      <form onsubmit="send_request(event)">
        <input type="text" id='input_text' />
        <input type="file" id='input_image' />

        <button type="submit">Submit</button>
      </form>


      <div id="replace_me">

      </div>

</main>

<script>
    function send_request(event) {
        event.preventDefault()
        let formData = new FormData();

        // Append the text and file to the FormData object
        formData.append('text', document.getElementById("input_text").value);  // Assuming you have an input element with id 'input_text'
        formData.append('image', document.getElementById("input_image").files[0]);
    
        // Use fetch to send the request
        fetch('/search', { 
            method: "POST",
            body: formData  // Send the FormData object as the body, headers are automatically set
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok: ' + response.statusText);
            }
            return response.text();
        })
        .then(html => {
            console.log("I RAN")
            console.log(html)
            document.getElementById("replace_me").innerHTML = html
        })
        .catch(error => {
            console.error('There has been a problem with your fetch operation:', error);
        });
    }

</script>

</body>
</html>
