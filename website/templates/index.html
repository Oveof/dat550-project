<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blockchain Network</title>
    <link rel="stylesheet" href="https://unpkg.com/pico.css"/>
</head>
<body>

<header>
    <h1>Recommendation thingy</h1>
</header>

<main>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
        }
	body, main {
		max-height: 100vh;
		width: 100vw;
	}
	* {
		paddin:0 !important;
		margin:0 !important;
	}
	#replace_me {
		overflow-y:scroll;
		max-height:90vh;
		height:90vh;
		width:100vw;
		display: flex;
		justify_content: space-around;
	}
	#form {
		width:100vw;
		max-height:10vh
	}
	img {
		max-height: 50%;
		height: auto;
		width: 90%;
	}
	.recommendation {
		border: 1px black
	}


      </style>

      <div id="replace_me"></div>

      <div id="form">
      <form onsubmit="send_request(event)">
        <input type="text" id='input_text' />
        <input type="file" id='input_image' />


        <button type="submit">Submit</button>
      </form>
	</div>


</main>

<script>
    function send_request(event) {
        event.preventDefault()
        let formData = new FormData();

        // Append the text and file to the FormData object
        formData.append('text', document.getElementById("input_text").value);  // Assuming you have an input element with id 'input_text'
        formData.append('image', document.getElementById("input_image").files[0]);
    
        // Use fetch to send the request
        fetch('/search', { 
            method: "POST",
            body: formData  // Send the FormData object as the body, headers are automatically set
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok: ' + response.statusText);
            }
            return response.text();
        })
        .then(html => {
            console.log("I RAN")
            console.log(html)
            document.getElementById("replace_me").innerHTML = html
        })
        .catch(error => {
            console.error('There has been a problem with your fetch operation:', error);
        });
    }
    function render_prompt(txt) {
	
    }

</script>

</body>
</html>


